(this["webpackJsonpmine-sweeper"]=this["webpackJsonpmine-sweeper"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(5),a=n.n(c),l=(n(19),n(20),n(10)),s=n(11),u=n(14),o=n(12),d=n(4),h="RESET_GRID",f="ADD_MINES",j="REVEAL_CELL_COUNT",b="APPLY_FLAG";function m(e,t){return{type:h,width:e,height:t}}function p(e,t){return{type:f,doNot:e,mineCount:t}}var O=n(3),g=n(1),v=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).restart=function(){var e=r.props.dispatch;r.setState({seconds:0}),null!==r.state.cancel&&clearInterval(r.state.cancel),e(m(document.getElementById("width").value,document.getElementById("height").value))},r.updateMines=function(){r.rerenderGrid(),r.setState({mines:r.inputRef.current.value})},r.rerenderGrid=function(){var e=r.props.dispatch;r.setState({seconds:0}),null!==r.state.cancel&&clearInterval(r.state.cancel),e(m(document.getElementById("width").value,document.getElementById("height").value))},r.state={cancel:null,seconds:0,mines:null},r.inputRef=i.a.createRef(),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.setState({mines:this.inputRef.current.value})}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(e.timerIsOn!==this.props.timerIsOn&&(this.props.timerIsOn||null===this.state.cancel||(clearInterval(this.state.cancel),this.setState({cancel:null})),this.props.timerIsOn&&null===this.state.cancel)){var r=setInterval((function(){n.setState({seconds:n.state.seconds+1})}),1e3);this.setState({cancel:r})}}},{key:"render",value:function(){return Object(g.jsxs)("div",{id:"controls",children:[Object(g.jsxs)("p",{id:"displaymines",children:["Mines left: ",null!==this.props.hasWon||this.props.timerIsOn?this.props.mines:this.state.mines]}),Object(g.jsxs)("p",{children:["Seconds played: ",this.state.seconds]}),Object(g.jsx)("p",{children:null!==this.props.hasWon?this.props.hasWon?"You won":"You lost":null}),Object(g.jsx)("button",{onClick:this.restart,id:"restart",children:"Reset Grid"}),Object(g.jsxs)("div",{className:"inputdiv width",children:[Object(g.jsx)("label",{children:"width: "}),Object(g.jsx)("input",{id:"width",type:"number",onChange:this.rerenderGrid,defaultValue:"10",min:"5",max:"40",placeholder:"width"})]}),Object(g.jsxs)("div",{className:"inputdiv height",children:[Object(g.jsx)("label",{children:"height:"}),Object(g.jsx)("input",{id:"height",max:"40",type:"number",onChange:this.rerenderGrid,defaultValue:"10",min:"5",placeholder:"height"})]}),Object(g.jsxs)("div",{className:"inputdiv mines",children:[Object(g.jsx)("label",{children:"mines:"}),Object(g.jsx)("input",{id:"mines",onChange:this.updateMines,type:"number",defaultValue:"10",min:"5",placeholder:"mines",ref:this.inputRef})]})]})}}]),n}(i.a.Component),x=Object(d.b)((function(e){return{hasWon:e.playerWins,mines:Object(O.flatten)(e.grid).filter((function(e){return e.isMine})).length-Object(O.flatten)(e.grid).filter((function(e){return e.isFlagged})).length,timerIsOn:e.timerIsOn}}))(v),y=n.p+"static/media/flag.98bc8c28.svg",I=n.p+"static/media/bomb.cffe0f47.svg",w=Object(d.b)((function(e){return{isTimerOn:e.timerIsOn}}))((function(e){var t="cell cell-"+e.cell.flagNumber+(e.cell.revealed?" revealed":"");return Object(g.jsx)("div",{onClick:function(t){t.preventDefault();var n,r=e.dispatch;e.isTimerOn||r(p(e.cell,document.getElementById("mines").value)),r((n=e.cell,{type:j,doNot:n}))},className:t,onContextMenu:function(t){t.preventDefault();var n,r=e.dispatch;e.isTimerOn||r(p(e.cell,document.getElementById("mines").value)),r((n=e.cell,{type:b,cell:n}))},children:e.cell.isFlagged?Object(g.jsx)("img",{src:y,height:"15px",width:"15px",alt:"flag"}):e.cell.revealed?e.cell.isMine?Object(g.jsx)("img",{src:I,height:"15px",width:"15px",alt:"flag"}):e.cell.flagNumber>0?e.cell.flagNumber:null:null})})),N=function(e){return Object(g.jsx)("div",{className:"row",children:e.row.map((function(e,t){return Object(g.jsx)(w,{cell:e},t)}))})},M=Object(d.b)((function(e){return{grid:e.grid}}))((function(e){return Object(g.jsx)("div",{id:"minesweeper",children:e.grid.map((function(e,t){return Object(g.jsx)(N,{row:e},t)}))})})),E=function(e){return Object(g.jsxs)("div",{id:"game",children:[Object(g.jsx)(x,{}),Object(g.jsx)(M,{})]})};var W=function(){return Object(g.jsxs)("div",{id:"app",children:[Object(g.jsx)("h1",{children:"Minesweeper"}),Object(g.jsxs)("div",{id:"instructions",children:[Object(g.jsx)("p",{children:"Click on a tile to get started."}),Object(g.jsx)("p",{children:"Right click to add a flag."}),Object(g.jsx)("p",{children:"Each mine must be flagged for you to win the game"}),Object(g.jsx)("p",{children:"Avoid the bombs."}),Object(g.jsx)("p",{children:"The number tells you how many bombs are nereby."}),Object(g.jsx)("p",{children:"No mines ever on the first click"})]}),Object(g.jsx)(E,{}),Object(g.jsxs)("p",{class:"attribution",children:["Flag image by ",Object(g.jsx)("a",{href:"https://www.flaticon.com/authors/alfredo-hernandez",children:"Alfredo Hernandez"})]})]})},C=n(13),F=n(2),S=n(9);function k(e,t){return Object(O.range)(t).map((function(t){return Object(O.range)(e).map((function(e){return{y:t,x:e,revealed:!1,flagNumber:0,isMine:!1,isFlagged:!1}}))}))}function R(e){var t=Object(O.flatten)(e),n=t.filter((function(e){return!e.isMine})).every((function(e){return e.revealed})),r=t.filter((function(e){return e.isMine})).every((function(e){return e.isFlagged})),i=t.filter((function(e){return!e.isMine})).every((function(e){return!e.isFlagged}));return n&&r&&i}function B(e,t){return t.map((function(t){return t.map((function(t){return t.x!==e.x||t.y!==e.y||t.revealed?t:Object(F.a)(Object(F.a)({},t),{},{isFlagged:!t.isFlagged})}))}))}function D(e,t,n){var r=Object(O.flatten)(e).filter((function(e){return e.x!==t.x||e.y!==t.y})),i=Object(O.sampleSize)(r,n);return e.map((function(e){return e.map((function(e){return i.some((function(t){return e.x===t.x&&e.y===t.y}))?Object(F.a)(Object(F.a)({},e),{},{isMine:!0}):e}))}))}function G(e,t,n){return!(t+1>n.length)&&!(e+1>n[0].length)&&e>=0&&t>=0?n[t][e]:null}function A(e,t){var n=[];return function e(t,r){if(t.isMine)return"game over";if(n.some((function(e){return t.x===e.x&&t.y===e.y})))return[];var i=function(e,t){var n=e.x,r=e.y;return[G(n-1,r,t),G(n-1,r-1,t),G(n,r-1,t),G(n+1,r-1,t),G(n+1,r,t),G(n+1,r+1,t),G(n,r+1,t),G(n-1,r+1,t)].filter((function(e){return null!==e}))}(t,r),c=function(e){return e.filter((function(e){return e.isMine})).length}(i);t.flagNumber=c,n.push(Object(F.a)({},t));var a=i.filter((function(e){return!e.isMine&&!n.some((function(t){return e.x===t.x&&e.y===t.y}))}));return 0===c?[Object(F.a)({},t)].concat(Object(O.flatten)(a.map((function(t){return e(t,r)})))):[Object(F.a)({},t)]}(e,t)}function T(e){return Object(S.a)(e.map((function(e){return e.map((function(e){return e.isMine?Object(F.a)(Object(F.a)({},e),{},{revealed:!0,isFlagged:!1}):e}))})))}function L(e,t){return Object(S.a)(t.map((function(t){return t.map((function(t){return e.some((function(e){return t.x===e.x&&t.y===e.y}))?Object(F.a)(Object(F.a)({},t),{},{revealed:!0,flagNumber:t.flagNumber,isFlagged:!1}):t}))})))}var _={grid:k(10,10),timerIsOn:!1,playerWins:null};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(F.a)(Object(F.a)({},e),{},{grid:k(t.width,t.height),playerWins:null,timerIsOn:!1});case f:return null===e.playerWins?Object(F.a)(Object(F.a)({},e),{},{grid:D(e.grid,t.doNot,t.mineCount),timerIsOn:!0}):e;case b:if(null===e.playerWins){var n=B(t.cell,e.grid),r=!!R(n)||null,i=!0!==r;return Object(F.a)(Object(F.a)({},e),{},{grid:n,playerWins:r,timerIsOn:i})}return e;case j:if(null===e.playerWins){var c=A(t.doNot,e.grid);if("game over"!==c){var a=L(c,e.grid),l=!!R(a)||null,s=!0!==l;return Object(F.a)(Object(F.a)({},e),{},{grid:a,playerWins:l,timerIsOn:s})}return Object(F.a)(Object(F.a)({},e),{},{grid:T(e.grid),playerWins:!1,timerIsOn:!1})}return e;default:return e}},z=Object(C.a)(V);a.a.render(Object(g.jsx)(d.a,{store:z,children:Object(g.jsx)(W,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.5dc70362.chunk.js.map